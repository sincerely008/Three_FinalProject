<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">

	<select id="boardlist" resultType="productDto" parameterType="hashmap">
		SELECT X.RNUM, X.CATEGORY_NO, X.PRODUCT_NO, X.PRODUCT_NAME, X.PRODUCT_STOCK, X.PRODUCT_DETAILS, X.PRODUCT_PRICE 
		FROM (SELECT ROWNUM AS RNUM, A.CATEGORY_NO, A.PRODUCT_NO, A.PRODUCT_NAME, A.PRODUCT_STOCK, A.PRODUCT_DETAILS, A.PRODUCT_PRICE
		FROM ( SELECT CATEGORY_NO, PRODUCT_NO, PRODUCT_NAME, PRODUCT_STOCK, PRODUCT_DETAILS, PRODUCT_PRICE
		FROM PRODUCT
		WHERE 1=1
		<if test="searchFiled != null and searchFiled != ''">
			AND ${searchFiled} LIKE '%' || #{searchValue} || '%'
		</if>
		<if test="id != null">
			AND ID = #{id}
		</if>
		ORDER BY PRODUCT_NO DESC
		) A
		WHERE ROWNUM <![CDATA[<=]]> #{noOfRecords}
		) X
		WHERE X.RNUM <![CDATA[>]]> #{offset} 
	</select>
	
	<select id="totalCountList" resultType="int">
 		SELECT COUNT(*)
 		FROM PRODUCT
 		WHERE 1=1
 		<if test="id != null">
	 		AND ID = #{id} 
	 	</if>
 	</select>
 	
 	<select id="fileCount" resultType="int">
 		SELECT COUNT(*)
 		FROM PRODUCT
 		WHERE 1=1
 		<if test="searchFiled != null and searchFiled != ''">
	 		AND ${searchFiled} LIKE '%' || #{searchValue} || '%'
	 	</if>
 	</select>
 	
 	<select id="selectOne" resultType="productDto">
 		SELECT CATEGORY_NO, PRODUCT_NO, PRODUCT_NAME, PRODUCT_STOCK, PRODUCT_DETAILS, PRODUCT_PRICE
 		FROM PRODUCT
 	</select>
 	
 	<select id="productlist" resultType="productDto">
 		SELECT CATEGORY_NO, PRODUCT_NO, PRODUCT_NAME, PRODUCT_STOCK, PRODUCT_DETAILS, PRODUCT_PRICE
		FROM PRODUCT
		ORDER BY CATEGORY_NO DESC
 	</select>
 	
 	<insert id="dummyInsert">
 		INSERT INTO PRODUCT VALUES(#{category_no}, PRODUCTSEQ.NEXTVAL, #{product_name}, #{product_stock}, #{product_details}, #{product_price}, #{product_imgurl})
 	</insert>
	
</mapper>
